<div class="container text-center">
    <h2>Registrar donación detallada</h2>
</div>
<div class="card border-secondary mb-4 container mt-5" id="contenedor">
    <div class="alert alert-dismissible bg-dark mt-3"> Descripción detallada </div>
    <div class="card-body">
        <form [formGroup]="formDetallada" class="container">

            <div class="form-group">
                <label for="labelNombre">Fecha asignada de retiro</label>
                <input formControlName="fechaRetiro" type="date" class="form-control" id="inputFechaRetiro" min="{{this.fechaActual | date: 'yyyy-MM-dd'}}">
                <div *ngIf="fechaRetiro.invalid && fechaRetiro.touched">
                    <small class="text-danger">Debe ingresar una fecha de retiro</small>
                </div>
            </div>

<!-- Mini Form del producto -->
            <div id="agregarProducto" class="container border mt-5">
                <div class="form-group mt-2 ">
                    <label for="labelNombreProducto">Código</label>
                    <input formControlName="barcode" type="number" placeholder="0023383424" class="form-control" id="barCode" >
                    <div *ngIf="barcode.invalid && barcode.touched">
                        <small class="text-danger">Debe ingresar código de donación</small>
                    </div>
                </div>

                <div  class="form-group mb-2 "> 
                        <label for="labelNombre">Fecha de vencimiento</label>
                        <input formControlName="vto" type="date" min="1" class="form-control" id="vto" placeholder="" min="{{this.fechaActual | date: 'yyyy-MM-dd'}}">
                        <div *ngIf="vto.invalid && vto.touched">
                            <small class="text-danger">Debe ingresar una fecha de vencimiento</small>
                        </div>
                </div>

                <div class="form-group mb-2 "> 
                        <label for="labelNombre">Cantidad</label>
                        <input  formControlName="ammount" default=0 type="number" min="1" class="form-control" id="ammount" placeholder="">
                        <div *ngIf="ammount.invalid && ammount.touched">
                            <small class="text-danger">Debe ingresar una cantidad</small>
                        </div>
                    </div>
                <button class="btn btn-dark mt-2 mb-2 inline" (click)="agregarProducto()">Agregar producto</button>
                <button class="btn btn-dark mt-2 mb-2 ml-2" (click)="leerConScanner()">Leer con scanner</button>
            </div>
<!-- Mini Form del producto -->

<!-- Lista de productos -->
            <section class="alert alert-dismissible bg-dark mt-3">
                Productos agregados
            </section>
            <table class="table table-hover table-bordered table-center">
                <thead>
                    <tr class="text-center">
                        <th scope="col">Descripción del producto</th>
                        <th scope="col">Fecha de vencimiento</th>
                        <th scope="col">Cantidad</th>
                    </tr>
                </thead>
                <tbody *ngFor="let producto of productos| paginate: { itemsPerPage: 10, currentPage: p }" class="text-center">
                    <tr>
                        <td>{{producto[0]}}</td>
                        <td>{{producto[2]}}</td>
                        <td>{{producto[1]}}</td>
                    </tr>
                </tbody>
            </table>
            <pagination-controls class="text-center" (pageChange)="p = $event"></pagination-controls>
<!-- FIN Lista de productos -->

             <h5>Volumen de alimentos</h5>
                        <div class="form-row mt-4">
                            <div class="col mb-3">
                                <label for="form-group">Alto</label>
                                <div class="input-group ">
                                    <input type="text" class="form-control " formControlName="alto" id="inputAlto" placeholder="65">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroupPrepend2">mts</span>
                                    </div>
                                </div>
                                <div *ngIf="vto.invalid && vto.touched">
                                    <small class="text-danger">Debe ingresar una fecha de vencimiento</small>
                                </div>
                            </div>
                            <div class="col mb-3">
                                <label for="form-group">Ancho</label>
                                <div class="input-group">
                                    <input type="text" class="form-control " formControlName="ancho"  id="inputAncho" placeholder="124">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroupPrepend2">mts</span>
                                    </div>                                  
                                </div>
                                <div *ngIf="ancho.invalid && ancho.touched">
                                    <small class="text-danger">Debe ingresar una fecha de vencimiento</small>
                                </div>
                            </div>
                            <div class="col mb-3">
                                <label for="form-group">Largo</label>
                                <div class="input-group ">
                                    <input formControlName="largo" type="text" class="form-control " id="inputLargo" placeholder="32">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroupPrepend2">mts</span>
                                    </div>    
                                </div>
                                <div *ngIf="largo.invalid && largo.touched">
                                    <small class="text-danger">Debe ingresar un largo</small>
                                </div>
                            </div>
                            <div class="col mb-3">
                                <label for="form-group">Peso</label>
                                <div class="input-group ">
                                    <input formControlName="peso" type="text" class="form-control " id="inputPeso" placeholder="10">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroupPrepend2">kg</span>
                                    </div>                                  
                                </div>
                                <div *ngIf="peso.invalid && peso.touched">
                                    <small class="text-danger">Debe ingresar un peso</small>
                                </div>
                            </div>
                        </div>

            <div class="form-group text-center mt-5">
                <button class="btn btn-dark mr-2" type="submit" (click)="onSubmit()">Guardar</button>
                <a routerLink="/home" class="btn btn-dark">Cancelar</a>
            </div>
        </form>
    </div>
</div>